<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pour ma pr√©cieuse In√®s ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Homemade+Apple&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #d63384; /* Rose magenta */
            --secondary-color: #ffafbd; /* Rose doux */
            --text-color: #4a3333;
            --envelope-color: #ff6b81; /* Un rouge plus vif pour l'enveloppe */
            --paper-color: #fffef0;
            --shadow-light: rgba(0,0,0,0.1);
            --shadow-medium: rgba(0,0,0,0.2);
            --shadow-dark: rgba(0,0,0,0.4);
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at top left, #ffdde1, #ffafbd, #ffc3a0); /* Fond d√©grad√© subtil */
            background-size: 200% 200%;
            animation: gradientBG 20s ease infinite;
            font-family: 'Poppins', sans-serif;
            color: var(--text-color);
            overflow: hidden; /* Cache les overflows pour les √©toiles */
            perspective: 1000px; /* Pour les effets 3D */
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- √âTOILES / PARTICULES SCINTILLANTES --- */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite alternate;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }

        /* --- CONTENEUR PRINCIPAL --- */
        .main-content {
            position: relative;
            z-index: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0; /* Cach√© au d√©but pour l'animation */
            transform: translateY(20px);
            animation: fadeIn 1s ease-out 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
            position: relative;
            z-index: 2;
        }

        /* --- ENVELOPPE 3D --- */
        .envelope-container {
            position: relative;
            width: 320px;
            height: 220px;
            margin: 50px auto;
            transform-style: preserve-3d;
            transition: transform 1s ease-in-out;
            cursor: pointer;
            z-index: 10; /* Pour qu'elle soit au-dessus de tout */
        }

        .envelope-container.open {
            transform: rotateX(180deg); /* Ouvre l'enveloppe */
        }

        .envelope-front, .envelope-back, .envelope-top-flap, .envelope-letter {
            position: absolute;
            width: 100%;
            height: 100%;
            background: var(--envelope-color);
            border-radius: 8px;
            box-shadow: 0 10px 30px var(--shadow-dark);
            backface-visibility: hidden; /* Cache l'arri√®re-face pour la 3D */
        }

        .envelope-front {
            transform: rotateX(0deg) translateZ(0px);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: white;
            font-family: 'Dancing Script', cursive;
            text-shadow: 1px 1px 3px var(--shadow-medium);
        }

        .envelope-back {
            transform: rotateX(180deg) translateZ(0px);
        }

        .envelope-top-flap {
            height: 50%;
            background: var(--envelope-color);
            transform-origin: bottom center;
            transform: rotateX(180deg) translateZ(0px);
            z-index: 1; /* Par-dessus le dos */
            transition: transform 0.5s ease-in-out;
            pointer-events: none; /* Ne doit pas intercepter les clics */
        }

        .envelope-container.open .envelope-top-flap {
            transform: rotateX(0deg) translateZ(0px);
        }
        
        .envelope-letter {
            background: var(--paper-color);
            width: 90%;
            height: 90%;
            top: 5%;
            left: 5%;
            padding: 20px;
            box-sizing: border-box;
            font-family: 'Homemade Apple', cursive;
            font-size: 1.3rem;
            line-height: 1.8;
            color: var(--text-color);
            border: 1px dashed var(--secondary-color);
            box-shadow: 0 5px 15px var(--shadow-light);
            overflow-y: auto;
            opacity: 0; /* Cach√©e au d√©but */
            transform: translateZ(50px) translateY(0px) scale(0.8);
            transition: opacity 0.5s ease-in-out 1s, transform 0.5s ease-in-out 1s;
            pointer-events: none; /* Initialement non cliquable */
        }

        .envelope-container.open .envelope-letter {
            opacity: 1;
            transform: translateZ(50px) translateY(-100px) scale(1);
            pointer-events: auto; /* Deviens cliquable une fois ouverte */
        }

        /* --- CAROUSEL 3D / POLAROID AM√âLIOR√â --- */
        .photo-gallery {
            display: flex;
            justify-content: center;
            margin-top: 50px;
            gap: 30px;
            perspective: 800px;
            opacity: 0;
            transition: opacity 1s ease-out 1s;
        }

        .envelope-container.open + .photo-gallery {
            opacity: 1;
        }

        .photo-card {
            width: 180px;
            height: 250px;
            background: white;
            padding: 10px 10px 40px 10px;
            box-shadow: 0 15px 40px var(--shadow-medium);
            border-radius: 8px;
            transform-style: preserve-3d;
            transition: transform 0.5s ease-out;
            position: relative;
            transform: rotateY(var(--rotate-y)) rotateX(var(--rotate-x)) translateZ(var(--translate-z));
        }
        .photo-card:hover {
            transform: rotateY(0deg) rotateX(0deg) translateZ(50px) scale(1.05);
            z-index: 1;
        }
        .photo-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 4px;
        }
        .photo-card p {
            font-family: 'Dancing Script', cursive;
            font-size: 1.3rem;
            text-align: center;
            margin-top: 10px;
            color: var(--primary-color);
        }

        /* --- BOUTON MUSIQUE FLOTTANT --- */
        .music-toggle-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 8px 20px var(--shadow-dark);
            font-size: 1.6rem;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease-in-out, background 0.3s;
            z-index: 100;
        }
        .music-toggle-btn:hover {
            transform: scale(1.1);
            background: var(--dark-pink);
        }

        /* --- COMPTEUR --- */
        .counter-display {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            padding: 10px 25px;
            border-radius: 30px;
            margin-bottom: 30px;
            font-weight: 500;
            color: white;
            text-shadow: 1px 1px 2px var(--shadow-light);
            border: 1px solid rgba(255,255,255,0.3);
            position: relative;
            z-index: 2;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            h1 { font-size: 3rem; }
            .envelope-container { margin: 30px auto; }
            .envelope-letter { font-size: 1rem; line-height: 1.6; }
            .photo-gallery { flex-direction: column; align-items: center; gap: 20px; }
            .photo-card { transform: rotate(0) translateZ(0); } /* Enl√®ve la 3D sur mobile pour simplicit√© */
            .music-toggle-btn { bottom: 20px; right: 20px; width: 50px; height: 50px; font-size: 1.3rem; }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars-container"></div>

    <div class="main-content">
        <h1>Pour ma pr√©cieuse In√®s</h1>

        <div class="counter-display" id="love-counter">Chargement...</div>

        <div class="envelope-container" id="envelope-main" onclick="openEnvelope()">
            <div class="envelope-front">Clique pour ouvrir ‚ù§Ô∏è</div>
            <div class="envelope-back"></div>
            <div class="envelope-top-flap"></div>
            <div class="envelope-letter" id="letter-text">
                <p>Ma ch√®re In√®s,</p>
                <p>Bienvenue dans notre petit coin de bonheur. Chaque jour pass√© √† tes c√¥t√©s est une m√©lodie que mon c≈ìur chante avec joie.</p>
                <p>Tu es l'√©toile qui guide mes nuits et le soleil qui r√©chauffe mes jours. Je suis incroyablement reconnaissant pour chaque rire, chaque c√¢lin et chaque instant partag√©.</p>
                <p>Ce petit cadeau num√©rique est juste un rappel de tout l'amour infini que je te porte.</p>
                <p style="text-align: right; margin-top: 30px;">Avec tout mon amour,</p>
                <p style="text-align: right; margin-top: 5px;">Ton mari, Omar</p>
            </div>
        </div>

        <div class="photo-gallery" id="photo-section">
            <div class="photo-card" style="--rotate-y: 10deg; --rotate-x: 5deg; --translate-z: 0px;">
                <img src="photo1.jpg" alt="Notre souvenir 1">
                <p>Nos d√©buts...</p>
            </div>
            <div class="photo-card" style="--rotate-y: -5deg; --rotate-x: -3deg; --translate-z: 10px;">
                <img src="photo2.jpg" alt="Notre souvenir 2">
                <p>Notre complicit√©</p>
            </div>
            <div class="photo-card" style="--rotate-y: 8deg; --rotate-x: -6deg; --translate-z: 0px;">
                <img src="photo3.jpg" alt="Notre souvenir 3">
                <p>Pour toujours</p>
            </div>
            </div>
    </div>

    <button class="music-toggle-btn" onclick="toggleMusic()" id="music-btn">üéµ</button>
    <audio id="bgMusic" loop>
        <source src="musique.mp3" type="audio/mpeg">
    </audio>

    <script>
        // --- √âTOILES / PARTICULES ---
        const starsContainer = document.getElementById('stars-container');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = `${Math.random() * 100}vw`;
            star.style.top = `${Math.random() * 100}vh`;
            star.style.width = star.style.height = `${Math.random() * 3 + 1}px`;
            star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
            starsContainer.appendChild(star);
        }

        // --- OUVERTURE DE L'ENVELOPPE ---
        const envelope = document.getElementById('envelope-main');
        const letterText = document.getElementById('letter-text');
        const fullLetterContent = letterText.innerHTML; // Stocke le contenu complet
        letterText.innerHTML = ''; // Vide le texte pour l'effet machine √† √©crire
        let letterOpened = false;

        function openEnvelope() {
            if (!letterOpened) {
                envelope.classList.add('open');
                typeWriter(fullLetterContent, letterText, 50); // Commence l'effet machine √† √©crire
                letterOpened = true;
                // Si la musique n'est pas jou√©e, on peut la d√©marrer ici (si le bouton est invisible)
                // document.getElementById('bgMusic').play();
                // document.getElementById('music-btn').innerText = '‚è∏Ô∏è';
            }
        }

        // Effet Machine √† √âcrire
        function typeWriter(text, element, delay) {
            let i = 0;
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, delay);
                }
            }
            type();
        }

        // --- COMPTEUR DE JOURS ---
        const startDate = new Date('2024-04-27'); // <<< CHANGE CETTE DATE POUR VOTRE JOUR SP√âCIAL
        function updateLoveCounter() {
            const now = new Date();
            const diff = now - startDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById('love-counter').innerText = `Notre histoire continue depuis ${days} jours d'amour ‚ù§Ô∏è`;
        }
        updateLoveCounter();
        setInterval(updateLoveCounter, 1000 * 60 * 60 * 24); // Met √† jour chaque jour

        // --- GESTION MUSIQUE ---
        const bgMusic = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('music-btn');
        function toggleMusic() {
            if (bgMusic.paused) {
                bgMusic.play();
                musicBtn.innerText = '‚è∏Ô∏è';
            } else {
                bgMusic.pause();
                musicBtn.innerText = 'üéµ';
            }
        }
    </script>
</body>
</html>
