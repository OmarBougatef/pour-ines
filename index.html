<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pour ma In√®s ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Homemade+Apple&family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root { --bg-pink: #ffb7c5; --accent: #d63384; --white: #ffffff; --gold: #d4af37; }
        body { margin: 0; min-height: 100vh; background-color: var(--bg-pink); font-family: 'Poppins', sans-serif; overflow-x: hidden; perspective: 1000px; }
        
        /* Navigation */
        .page { display: none; min-height: 100vh; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; }
        .active-page { display: flex; }
        .back-btn { position: fixed; top: 20px; left: 20px; background: rgba(255,255,255,0.7); border: none; padding: 10px; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 1.2rem; }

        h1 { font-family: 'Dancing Script'; color: white; font-size: clamp(2.5rem, 8vw, 4rem); text-shadow: 2px 4px 10px rgba(0,0,0,0.1); text-align: center; margin-bottom: 30px; }

        /* --- ACCUEIL --- */
        .menu-container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; max-width: 450px; }
        .main-btn { width: 90px; height: 90px; background: white; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 1.8rem; cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.2); transition: 0.3s; border: none; }
        .main-btn:hover { transform: scale(1.1); }
        .btn-label { font-size: 0.7rem; font-weight: bold; color: var(--accent); margin-top: 5px; text-align: center; }

        /* --- JEU "JOIN ME" --- */
        #game-container { position: relative; width: 100%; max-width: 600px; height: 200px; background: #fff5f8; border-bottom: 4px solid var(--accent); overflow: hidden; border-radius: 15px; display: none; margin-top: 20px; }
        #player { position: absolute; bottom: 0; left: 50px; width: 40px; height: 40px; font-size: 30px; display: flex; align-items: center; justify-content: center; transition: bottom 0.1s; }
        .obstacle { position: absolute; bottom: 0; right: -50px; width: 30px; height: 30px; font-size: 25px; display: flex; align-items: center; justify-content: center; }
        #omar-target { position: absolute; bottom: 0; right: 20px; font-size: 40px; display: none; }
        #game-msg { color: white; font-weight: bold; margin-bottom: 10px; text-align: center; }
        #game-hint { font-size: 0.8rem; color: white; margin-top: 10px; }

        /* --- TIMELINE / QUIZ / SURPRISE (Gard√©s des √©tapes pr√©c√©dentes) --- */
        .timeline { width: 90%; max-width: 500px; background: rgba(255, 255, 255, 0.9); padding: 20px; border-radius: 20px; }
        .timeline-item { display: flex; gap: 15px; margin-bottom: 20px; border-left: 3px dashed var(--accent); padding-left: 20px; position: relative; }
        .timeline-item::before { content: '‚ù§Ô∏è'; position: absolute; left: -13px; background: white; font-size: 12px; }
        .date-text { font-weight: bold; color: var(--accent); min-width: 85px; }
        .quiz-card { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; text-align: center; }
        .option-btn { background: #f8f9fa; border: 2px solid #eee; padding: 12px; border-radius: 10px; cursor: pointer; width: 100%; margin-top: 10px; }
        .music-toggle { position: fixed; bottom: 20px; right: 20px; background: white; border: none; padding: 10px; border-radius: 50px; z-index: 1000; font-weight: bold; color: var(--accent); }
        .heart-particle { position: fixed; top: -20px; animation: fall linear forwards; pointer-events: none; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
    </style>
</head>
<body>

    <button class="back-btn" id="backBtn" style="display:none" onclick="stopGame(); showPage('home-page');">‚¨ÖÔ∏è</button>

    <section id="home-page" class="page active-page">
        <h1>Coucou ma In√®s ‚ù§Ô∏è</h1>
        <div class="menu-container">
            <button class="main-btn" onclick="showPage('surprise-page')">‚ù§Ô∏è<span class="btn-label">Surprise</span></button>
            <button class="main-btn" onclick="showPage('dates-page')">üìÖ<span class="btn-label">Nos Dates</span></button>
            <button class="main-btn" onclick="showPage('game-page')">üèÉ‚Äç‚ôÄÔ∏è<span class="btn-label">Join me !</span></button>
            <button class="main-btn" onclick="showPage('quiz-page')">‚ùì<span class="btn-label">Le Quiz</span></button>
        </div>
    </section>

    <section id="game-page" class="page">
        <h2 id="game-msg">Saute par-dessus les obstacles pour me rejoindre !</h2>
        <div id="game-container" onclick="jump()">
            <div id="player">üë∏</div>
            <div id="omar-target">üë®‚Äçüíº</div>
        </div>
        <div id="game-hint">Appuie sur l'√©cran pour sauter</div>
        <button id="start-game-btn" class="option-btn" style="width: auto; padding: 10px 30px;" onclick="startGame()">Commencer</button>
    </section>

    <section id="dates-page" class="page">
        <h1>Nos Moments Cl√©s ‚è≥</h1>
        <div class="timeline">
            <div class="timeline-item"><div class="date-text">27/04/2024</div><div>Premier RDV ‚ú®</div></div>
            <div class="timeline-item"><div class="date-text">22/02/2025</div><div>Demande de mariage üíç</div></div>
            <div class="timeline-item"><div class="date-text">23/02/2025</div><div>Rencontre familles ü§ù</div></div>
            <div class="timeline-item"><div class="date-text">06/09/2025</div><div>Fian√ßailles üéâ</div></div>
            <div class="timeline-item" style="border: 2px solid var(--gold); border-radius: 10px; padding: 10px;">
                <div class="date-text">19/08/2026</div><div><b>Mariage üë∞ü§µ</b><br><span id="countdown"></span></div>
            </div>
        </div>
    </section>

    <section id="surprise-page" class="page">
        <div id="letter-box">
            <p>Ma ch√®re In√®s, Tu es ma force et ma joie. Merci d'√™tre toi ! ‚ù§Ô∏è</p>
            <p style="text-align: right;">Omar</p>
        </div>
    </section>

    <section id="quiz-page" class="page">
        <div class="quiz-card" id="quiz-card"></div>
    </section>

    <button class="music-toggle" onclick="toggleMusic()"><span id="musicon">üéµ</span> Ambiance</button>
    <audio id="bgMusic" loop><source src="musique.mp3" type="audio/mpeg"></audio>

    <script>
        // --- NAVIGATION ---
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            document.getElementById('backBtn').style.display = (pageId === 'home-page') ? 'none' : 'block';
            if(pageId === 'dates-page') updateCountdown();
            if(pageId === 'quiz-page') initQuiz();
        }

        // --- JEU JOIN ME LOGIC ---
        let isJumping = false;
        let scoreJeu = 0;
        let gameActive = false;
        let gameLoop;

        function startGame() {
            gameActive = true;
            scoreJeu = 0;
            document.getElementById('game-container').style.display = 'block';
            document.getElementById('start-game-btn').style.display = 'none';
            document.getElementById('omar-target').style.display = 'none';
            document.getElementById('game-msg').innerText = "Vite, rejoins-moi !";
            spawnObstacle();
        }

        function jump() {
            if (isJumping || !gameActive) return;
            isJumping = true;
            let p = document.getElementById('player');
            let pos = 0;
            let upInterval = setInterval(() => {
                if (pos >= 120) {
                    clearInterval(upInterval);
                    let downInterval = setInterval(() => {
                        if (pos <= 0) {
                            clearInterval(downInterval);
                            isJumping = false;
                        }
                        pos -= 5;
                        p.style.bottom = pos + 'px';
                    }, 20);
                }
                pos += 5;
                p.style.bottom = pos + 'px';
            }, 20);
        }

        function spawnObstacle() {
            if (!gameActive) return;
            scoreJeu++;
            
            // Si elle a √©vit√© 5 obstacles, elle gagne et tu apparais
            if (scoreJeu > 5) {
                winGame();
                return;
            }

            const obs = document.createElement('div');
            obs.classList.add('obstacle');
            obs.innerHTML = ['‚õ∞Ô∏è', 'üåµ', 'ü™µ'][Math.floor(Math.random()*3)];
            document.getElementById('game-container').appendChild(obs);

            let pos = 600;
            let moveInterval = setInterval(() => {
                if (!gameActive) { clearInterval(moveInterval); obs.remove(); return; }
                pos -= 7;
                obs.style.right = (600 - pos) + 'px';

                // Collision
                let pBottom = parseInt(window.getComputedStyle(document.getElementById('player')).getPropertyValue('bottom'));
                if (pos < 90 && pos > 50 && pBottom < 30) {
                    gameActive = false;
                    clearInterval(moveInterval);
                    obs.remove();
                    alert("Oh non ! R√©essaie pour me rejoindre ! üèÉ‚Äç‚ôÄÔ∏è");
                    document.getElementById('start-game-btn').style.display = 'block';
                }

                if (pos < -50) {
                    clearInterval(moveInterval);
                    obs.remove();
                    spawnObstacle();
                }
            }, 20);
        }

        function winGame() {
            gameActive = false;
            document.getElementById('omar-target').style.display = 'block';
            document.getElementById('game-msg').innerHTML = "TU M'AS REJOINT ! ‚ù§Ô∏è<br>Rien ne peut nous arr√™ter.";
            startHearts();
        }

        function stopGame() { gameActive = false; document.getElementById('game-container').style.display = 'none'; document.getElementById('start-game-btn').style.display = 'block'; }

        // --- COUNTDOWN & QUIZ & HEARTS (Simplifi√©s pour tenir) ---
        function updateCountdown() {
            const diff = new Date("August 19, 2026").getTime() - new Date().getTime();
            document.getElementById('countdown').innerText = Math.floor(diff / (1000 * 60 * 60 * 24)) + " jours restants !";
        }

        const questions = [
            { q: "Ma veste au 1er RDV ?", a: ["Sur-Chemise", "Beige", "Sans manche", "Blanche"], correct: 0 },
            { q: "Date du 1er 'Je t'aime' ?", a: ["05 Mai", "11 Mai", "15 Mai", "24 Mai"], correct: 1 },
            { q: "Notre 1er resto ?", a: ["Dar Zarrouk", "Villa Didon", "Kunafaty", "La tranche"], correct: 3 },
            { q: "Destination de voyage ?", a: ["Prague", "Italie", "France", "Seychelles"], correct: 1 },
            { q: "Je t'aime ?", a: ["Beaucoup", "Passionn√©ment", "√Ä la folie", "L'infini et au-del√†"], correct: 3 }
        ];

        function initQuiz() {
            let qIdx = 0, sc = 0;
            const card = document.getElementById('quiz-card');
            const render = () => {
                const q = questions[qIdx];
                card.innerHTML = `<h2>${q.q}</h2>` + q.a.map((opt, i) => `<button class="option-btn" onclick="check(${i})">${opt}</button>`).join('');
            };
            window.check = (i) => {
                if(i === questions[qIdx].correct) sc++;
                qIdx++;
                if(qIdx < questions.length) render();
                else card.innerHTML = `<h2>${Math.round(sc/5*100)}%</h2><p>${sc>=4 ? 'Bravo mon amour ! ‚ù§Ô∏è' : 'R√©essaie ! üò§'}</p>`;
            };
            render();
        }

        let hInt;
        function startHearts() { if(hInt) clearInterval(hInt); hInt = setInterval(() => {
            const h = document.createElement('div'); h.classList.add('heart-particle'); h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random()*100+'vw'; h.style.fontSize = (Math.random()*20+10)+'px';
            h.style.animationDuration = (Math.random()*3+2)+'s'; document.body.appendChild(h);
            setTimeout(() => h.remove(), 5000);
        }, 400); }

        function toggleMusic() { 
            const m = document.getElementById('bgMusic'); 
            m.paused ? m.play() : m.pause(); 
            document.getElementById('musicon').innerText = m.paused ? "üéµ" : "‚è∏Ô∏è";
        }
    </script>
</body>
</html>
