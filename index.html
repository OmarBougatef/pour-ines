<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Love Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        :root {
            --bg-color: #1a1a2e;
            --wall-color: #16213e;
            --path-color: #0f3460;
            --accent-color: #e94560;
            --gold: #ffd700;
            --text-color: #fff;
            --cat1: #4834d4;
            --cat2: #f0932b;
            --cat3: #eb4d4b;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Press Start 2P', cursive;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh; overflow: hidden; touch-action: manipulation;
        }

        .hidden { display: none !important; }

        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background-color: var(--bg-color); z-index: 10;
        }

        /* ---- HUB PRINCIPAL ---- */
        #hub-screen h1 { font-size: 18px; margin-bottom: 40px; color: var(--gold); text-align: center; line-height: 1.5; }
        .game-card {
            background: var(--wall-color);
            border: 4px solid #fff;
            padding: 20px; margin: 15px;
            width: 260px; text-align: center;
            cursor: pointer; box-shadow: 6px 6px 0 #000;
        }
        .game-card:active { transform: translate(3px, 3px); box-shadow: 2px 2px 0 #000; }
        .icon { font-size: 40px; margin-bottom: 10px; }

        /* ---- ASK ME : CATEGORIES ---- */
        .cat-container { display: flex; flex-direction: column; gap: 15px; width: 90%; }
        .cat-card {
            padding: 15px; border: 4px solid #fff; text-align: center;
            cursor: pointer; box-shadow: 4px 4px 0 #000;
        }
        .cat-card h3 { font-size: 12px; margin: 0 0 5px 0; }
        .cat-card small { font-size: 8px; opacity: 0.9; }
        .cat-card.c1 { background: var(--cat1); }
        .cat-card.c2 { background: var(--cat2); }
        .cat-card.c3 { background: var(--cat3); }

        /* ---- ASK ME : GRID ---- */
        #cards-grid-screen { justify-content: flex-start; overflow-y: auto; padding-top: 20px; }
        .grid {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 8px; padding: 15px; width: 100%; max-width: 500px;
        }
        
        .card-item { aspect-ratio: 2/3; perspective: 1000px; cursor: pointer; }
        .card-inner {
            position: relative; width: 100%; height: 100%;
            text-align: center; transition: transform 0.6s;
            transform-style: preserve-3d; border: 2px solid #fff;
        }
        .card-item.flipped .card-inner { transform: rotateY(180deg); }
        
        .card-front, .card-back {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; display: flex;
            align-items: center; justify-content: center; padding: 5px;
        }
        .card-front { 
            background: #fff; color: #000; font-size: 24px;
            background-image: radial-gradient(#ddd 10%, transparent 10%);
            background-size: 10px 10px;
        }
        .card-back {
            background: #f1f1f1; color: #000;
            transform: rotateY(180deg); font-size: 11px; 
            font-family: Arial, sans-serif; font-weight: bold; line-height: 1.4;
            border: 2px solid var(--accent-color);
            direction: rtl; /* Pour l'arabe */
        }

        .back-btn {
            margin: 20px; padding: 12px 20px;
            background: #333; color: #fff; border: 2px solid #fff;
            font-family: 'Press Start 2P'; font-size: 9px; cursor: pointer;
        }

        /* ---- JOIN ME (Labyrinth) ---- */
        #game-container { border: 4px solid #fff; background: #000; margin-bottom: 10px; }
        canvas { display: block; image-rendering: pixelated; }
        #controls { display: grid; grid-template-columns: 60px 60px 60px; grid-template-rows: 60px 60px; gap: 8px; }
        .d-pad-btn {
            width: 60px; height: 60px; background: rgba(255,255,255,0.15);
            border: 2px solid #fff; display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: #fff; border-radius: 8px;
        }

        .heart-beat { font-size: 50px; color: var(--accent-color); animation: beat 0.8s infinite alternate; }
        @keyframes beat { 0% { transform: scale(1); } 100% { transform: scale(1.2); } }
    </style>
</head>
<body>

    <div id="hub-screen" class="screen">
        <h1>ROMANTIC GAME BOX</h1>
        <div class="game-card" onclick="showJoinMe()">
            <div class="icon">üè∞</div>
            <div>JOIN ME!</div>
        </div>
        <div class="game-card" onclick="showAskMe()">
            <div class="icon">‚ùì</div>
            <div>ASK ME!</div>
        </div>
    </div>

    <div id="askme-cats" class="screen hidden">
        <h2 style="font-size: 14px;">CHOISIS TON MODE</h2>
        <div class="cat-container">
            <div class="cat-card c1" onclick="loadQuestions(1)">
                <h3>Butterfly Mode</h3>
                <small>Soft & √âmotion</small>
            </div>
            <div class="cat-card c2" onclick="loadQuestions(2)">
                <h3>Spicy Talks</h3>
                <small>S√©duction & D√©sir</small>
            </div>
            <div class="cat-card c3" onclick="loadQuestions(3)">
                <h3>No Limits</h3>
                <small>Intense & Passion</small>
            </div>
        </div>
        <button class="back-btn" onclick="goToHub()">‚¨Ö RETOUR MENU</button>
    </div>

    <div id="cards-grid-screen" class="screen hidden">
        <h2 id="current-cat-title" style="font-size: 10px; margin: 10px; color: var(--gold);"></h2>
        <div class="grid" id="main-grid"></div>
        <button class="back-btn" onclick="showAskMe()">‚¨Ö CAT√âGORIES</button>
    </div>

    <div id="game-screen" class="screen hidden">
        <div id="game-container"><canvas id="gameCanvas"></canvas></div>
        <div id="controls">
            <div class="d-pad-btn" style="grid-column:2" ontouchstart="movePlayer(0,-1,event)" onmousedown="movePlayer(0,-1)">‚ñ≤</div>
            <div class="d-pad-btn" style="grid-column:1;grid-row:2" ontouchstart="movePlayer(-1,0,event)" onmousedown="movePlayer(-1,0)">‚óÄ</div>
            <div class="d-pad-btn" style="grid-column:2;grid-row:2" ontouchstart="movePlayer(0,1,event)" onmousedown="movePlayer(0,1)">‚ñº</div>
            <div class="d-pad-btn" style="grid-column:3;grid-row:2" ontouchstart="movePlayer(1,0,event)" onmousedown="movePlayer(1,0)">‚ñ∂</div>
        </div>
        <button class="back-btn" onclick="goToHub()">‚¨Ö QUITTER</button>
    </div>

    <div id="win-modal" class="screen hidden">
        <div class="heart-beat">‚ù§Ô∏è</div>
        <h1>TU AS GAGN√â !</h1>
        <p style="text-align:center; font-size:10px; padding:20px; line-height:1.8;">
            Comme dans ce jeu, je trouverai toujours mon chemin vers toi. Je t'aime !
        </p>
        <button class="back-btn" onclick="goToHub()">RETOUR MENU</button>
    </div>

    <script>
        // --- DATA QUESTIONS (ARABE) ---
        const questions = {
            1: [
                "ÿ¥ŸÜŸàÿ© ÿ£ÿ≠ŸÑŸâ ÿ∞ŸÉÿ±Ÿâ ÿπŸÜÿØŸÉ ŸÖÿπÿßŸäÿß ŸÖÿß ÿ™ŸÜÿ≥ÿßŸáÿßÿ¥ÿü", "ÿ£ŸÜÿß ŸáŸä ÿ£ŸÉÿ´ÿ± ŸÑÿ≠ÿ∏ÿ© ÿ≠ÿ≥Ÿäÿ™ ŸÅŸäŸáÿß ÿ±Ÿàÿ≠ŸÉ ŸÖÿ™ŸáŸÜŸäÿ© Ÿà 'Safe' ŸÖÿπÿßŸäÿßÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ÿÆŸÑÿßÿ™ŸÉ ÿ™ÿ∫ÿ±ŸÖ ÿ®Ÿäÿß Ÿàÿ™ŸàŸÇÿπ ŸÅŸä ÿ≠ÿ®Ÿäÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑ ÿßŸÑŸÑŸä ŸÅŸäŸë Ÿäÿ∑ŸÖŸÜŸÉ ÿ£ŸÉÿ´ÿ± ÿ≠ÿßÿ¨ÿ©ÿü", "ŸÉŸä ÿ™ÿÆŸÖŸÖ ŸÅŸäŸÜÿßÿå ÿ¥ŸÜŸàÿ© ÿ£ŸàŸÑ ÿµŸàÿ±ÿ© ÿ™ÿ¨Ÿä ÿ®ŸäŸÜ ÿπŸäŸÜŸäŸÉÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ŸÜÿπŸÖŸÑŸáÿß ÿ™ÿÆŸÑŸäŸÉ ÿ™ÿ™ÿ®ÿ≥ŸÖ ŸÖŸÜ ÿ∫Ÿäÿ± ÿ≥ÿ®ÿ®ÿü", "ÿ¥ŸÜŸàÿ© ÿ£ÿ®ÿ≥ÿ∑ ŸÑÿ≠ÿ∏ÿ© ÿπÿ¥ŸÜÿßŸáÿß Ÿàÿ®ŸÇÿßÿ™ ŸÖÿ≠ŸÅŸàÿ±ÿ© ŸÅŸä ÿ®ÿßŸÑŸÉÿü", "ÿ¥ŸÜŸàÿ© ÿ£ŸÉÿ´ÿ± ÿ≠ÿßÿ¨ÿ© ÿ™ÿπÿ¨ÿ®ŸÉ ŸÅŸä ÿ¥ÿÆÿµŸäÿ™Ÿä Ÿàÿ™ŸÇÿØÿ±Ÿáÿßÿü", "ÿ£ŸÜÿß ŸáŸä ÿßŸÑŸÖÿ±ÿ© ÿßŸÑŸÑŸä ÿ≠ÿ≥Ÿäÿ™ ŸÅŸäŸáÿß ÿßŸÑŸÑŸä ÿ£ŸÜÿß ŸÅÿßŸáŸÖŸÑŸÉ ÿ±Ÿàÿ≠ŸÉ ÿ®ÿßŸÑÿ®ÿßŸáŸäÿü", "ÿ¥ŸÜŸàÿ© ÿ£ÿ≠ŸÑŸâ ÿßÿ≥ŸÖ 'Dala3' ŸÜÿ≠ÿ®ŸÉ ÿ™ŸÜÿßÿØŸäŸÜŸä ÿ®ŸäŸáÿü", "ÿ¥ŸÜŸàÿ© ÿ£ŸÉÿ´ÿ± ÿ≠ÿ±ŸÉÿ© (Geste) ŸÜÿπŸÖŸÑŸáÿß ÿ™ŸÖÿ≥ŸÑŸÉ ŸÇŸÑÿ®ŸÉÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑŸÖŸàŸÇŸÅ ÿßŸÑŸÑŸä ÿÆŸÑÿßŸÉ ÿ™ŸÇŸàŸÑ ŸÅŸä ÿØÿßÿÆŸÑŸÉ 'Ÿáÿ∞ÿß ŸáŸà ÿßŸÑŸÑŸä ÿ≠ÿßÿ¨ÿ™Ÿä ÿ®ŸäŸá'ÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ∞ŸÉÿ±Ÿâ ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ® ŸÜÿ±ÿ¨ÿπŸàÿß ŸÜÿπŸäÿ¥ŸàŸáÿß ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâÿü", "ŸàŸÇÿ™ÿßÿ¥ ÿ≠ÿ≥Ÿäÿ™ ÿ±Ÿàÿ≠ŸÉ ŸÅÿÆŸàÿ±ÿ© ÿ®ŸäŸÜÿß Ÿàÿ®ŸÑŸä ŸàÿµŸÑŸÜÿß ŸÑŸáÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿµŸÅÿ© ÿßŸÑŸÑŸä ŸÅŸäŸë ÿ™ÿÆŸÑŸäŸÉ ŸÖÿ∑ŸÖŸÜÿ© ÿπŸÑŸâ ŸÖÿ≥ÿ™ŸÇÿ®ŸÑŸÜÿß ŸÖÿπ ÿ®ÿπÿ∂ŸÜÿßÿü", "ÿ£ŸÜÿß ŸáŸä ÿßŸÑŸÑÿ≠ÿ∏ÿ© ÿßŸÑŸÑŸä ÿ≠ÿ≥Ÿäÿ™ ŸÅŸäŸáÿß ÿßŸÑŸÑŸä ÿ£ŸÜÿß ŸÜÿ≠ÿ®ŸÉ ŸÖŸÜ ÿ£ÿπŸÖÿßŸÇ ŸÇŸÑÿ®Ÿäÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ŸÜÿπŸÖŸÑŸáÿß ÿ£ŸÜÿß ÿÆŸäÿ± ŸÖŸÜ ÿßŸÑŸÜÿßÿ≥ ÿßŸÑŸÉŸÑ ŸÅŸä ÿπŸäŸÜŸäŸÉÿü", "ŸÉŸä ÿ™ÿ≠ŸÉŸä ÿπŸÑŸäÿß ŸÑÿµÿßÿ≠ÿ®ÿßÿ™ŸÉ ŸàŸÑÿß ŸÑŸÜÿßÿ≥ ÿ£ÿÆÿ±Ÿâÿå ÿ¥ŸÜŸàÿ© ÿ™ŸÇŸàŸÑÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ®ŸÜÿß ŸÜÿπŸÖŸÑŸàŸáÿß ŸÖÿπ ÿ®ÿπÿ∂ŸÜÿß ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿßŸÑÿπÿßÿØÿ©ÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ÿ™ÿÆÿßŸÅ ÿπŸÑŸäŸáÿß ŸÑÿß ÿ™ÿ∂Ÿäÿπ ÿ®ŸäŸÜÿßÿ™ŸÜÿß Ÿàÿ™ÿ≠ÿ®ŸÜÿß ŸÜÿ≠ÿßŸÅÿ∏Ÿàÿß ÿπŸÑŸäŸáÿß ÿØŸäŸÖÿßÿü"
            ],
            2: [
                "ÿ£ŸÜÿß ŸáŸä ÿßŸÑŸÑÿ≠ÿ∏ÿ© ÿßŸÑŸÑŸä ÿ®ÿØÿ£ÿ™ ÿ™ÿ¥ÿ™ŸáŸä ŸÅŸäŸë ŸÅŸäŸáÿß ÿ®ÿßŸÑÿ±ÿ≥ŸÖŸäÿü", "ÿ£ŸÜÿß ŸáŸä ÿßŸÑÿ∫ÿ≤ÿ±ÿ© ŸÖÿ™ÿßÿπŸä ÿßŸÑŸÑŸä ÿ™ÿÆŸÑŸäŸÉ ÿ™ÿ∞Ÿàÿ® ŸàŸÖÿß ÿπÿßÿØÿ¥ ÿ™ÿπÿ±ŸÅ ÿ¥ÿ™ŸÇŸàŸÑÿü", "ŸàŸÇÿ™ÿßÿ¥ ÿ™ÿ≠ÿ≥ ÿßŸÑŸÑŸä 'ÿßŸÑÿ™ŸÜÿ¥ŸÜ' (Tension) ŸàÿßŸÑÿ¥ŸáŸàÿ© ÿ®ŸäŸÜÿßÿ™ŸÜÿß ŸàÿµŸÑÿ™ ŸÑŸÄ 'ÿßŸÑÿ™Ÿàÿ®'ÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑŸÖŸàŸÇŸÅ ÿßŸÑŸÑŸä ŸÑÿ™Ÿàÿ© ŸÉŸä ÿ™ÿ™ŸÅŸÉÿ±Ÿà ÿ®ÿØŸÜŸÉ ŸäŸÇÿ¥ÿπÿ±ÿü", "ÿ¥ŸÜŸàÿ© ÿ£ŸÉÿ´ÿ± ÿ≠ÿßÿ¨ÿ© ŸÅŸä 'ÿßŸÑÿ±ÿ≤ÿßŸÜÿ©' ŸÖÿ™ÿßÿπŸä ÿ™ÿ¥ÿπŸÑŸÉ Ÿàÿ™ÿÆŸÑŸäŸÉ ŸÖÿ¥ÿ™ŸáŸäÿ™ŸÜŸäÿü", "ŸÉŸä ÿ™ÿÆŸÖŸÖ ŸÅŸä ÿßŸÑŸÇÿ±ÿ® ÿßŸÑŸÑŸä ÿ®ŸäŸÜÿßÿ™ŸÜÿßÿå ÿ¥ŸÜŸàÿ© ÿßŸÑÿ•ÿ≠ÿ≥ÿßÿ≥ ÿßŸÑŸÑŸä Ÿäÿ±ŸÉÿ®ŸÉÿü", "ÿ£ŸÜÿß ŸáŸä ÿßŸÑŸÑÿ≠ÿ∏ÿ© ÿßŸÑŸÑŸä ŸÅÿßÿ¨ÿ£ÿ™ŸÉ ŸÅŸäŸáÿß ÿßŸÑÿ¥ŸáŸàÿ© ÿ®ŸÇŸàÿ™Ÿáÿßÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ÿπŸÖŸÑÿ™Ÿáÿß ÿ£ŸÜÿß (ŸÖŸÜ ÿ∫Ÿäÿ± ŸÖÿß ŸÜŸÇÿµÿØ) ŸàÿÆŸÑÿßÿ™ŸÉ ÿ™ÿ™ÿØŸàÿÆŸÑ Ÿàÿ™ÿØÿÆŸÑ ÿ®ÿπÿ∂ŸÉÿü", "ŸÉŸä ÿ™ÿ®ÿØÿ£ ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜŸäÿå ÿ¥ŸÜŸàÿ© ÿ£ŸàŸÑ ÿ≠ÿßÿ¨ÿ© ÿ®ÿØŸÜŸÉ Ÿäÿ≠ÿ≥ ÿ®ŸäŸáÿßÿü", "ÿ£ŸÜÿß ŸáŸä ÿßŸÑŸÑÿ≠ÿ∏ÿ© ÿßŸÑŸÑŸä ÿÆŸÑÿßÿ™ŸÉ ÿ™ÿ≠ÿ® ÿ™ŸÇÿ±ÿ®ŸÑŸä ÿ£ŸÉÿ´ÿ± Ÿàÿ™ŸÉÿ®ÿ¥ ŸÅŸäŸëÿü", "ÿ¥ŸÜŸàÿ© ÿ£ŸÉÿ´ÿ± ÿ≠ÿßÿ¨ÿ© ŸÅŸä ÿßŸÑŸÇÿ±ÿ® ŸÖÿ™ÿßÿπŸÜÿß ÿ™ÿÆŸÑŸäŸÉ ÿ™ŸÅŸÇÿØ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© ÿπŸÑŸâ ÿ±Ÿàÿ≠ŸÉÿü", "ŸàŸÇÿ™ÿßÿ¥ ÿ≠ÿ≥Ÿäÿ™ ÿßŸÑŸÑŸä ÿßŸÑÿ≠ŸÉÿßŸäÿ© ÿ®ŸäŸÜÿßÿ™ŸÜÿß ŸàŸÑÿßÿ™ ÿØÿßÿÆŸÑÿ© ŸÅŸäŸáÿß ÿßŸÑÿ¥ŸáŸàÿ© ÿ®ÿßŸÑÿ±ÿ≥ŸÖŸäÿü", "ÿ™ŸÅŸÉÿ± ŸÖÿ±ÿ© ÿ≥ŸÉÿ™ŸÜÿß ŸÅŸäŸáÿß ÿ£ŸÖÿß ÿßŸÑÿ≥ŸÉÿßÿ™ ŸÉÿßŸÜ ŸÖÿπÿ®Ÿä ÿ®ÿßŸÑÿ±ÿ∫ÿ®ÿ© ŸàÿßŸÑŸÉŸÑÿßŸÖÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ®ŸÜŸä ŸÜÿπŸÖŸÑŸáÿß ŸÖÿπÿßŸÉ ÿ®ÿ£ŸÉÿ´ÿ± ÿ±ÿ≤ÿßŸÜÿ© (Slowly) Ÿàÿ®ÿ¥ŸàŸäÿ©ÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑŸÖŸàŸÇŸÅ ŸàŸÑÿß ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑŸÑŸä ÿÆŸÑÿßÿ™ Ÿàÿ¨ŸáŸÉ Ÿäÿ≠ŸÖÿßÿ± ÿ®ÿßŸÑÿ™ÿ≠ÿ¥ŸäŸÖ ŸàÿßŸÑÿ¥ŸáŸàÿ©ÿü", "ŸàŸÇÿ™ÿßÿ¥ ÿ≠ÿ≥Ÿäÿ™ ÿßŸÑŸÑŸä ŸÅŸÖÿß 'Chimie' ŸÇŸàŸäÿ© ÿ®ŸäŸÜÿßÿ™ŸÜÿß ÿÆŸÑÿßÿ™ŸÜÿß ŸÜÿ¥ÿπŸÑŸàÿßÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ŸÅŸäŸë ÿ™ÿÆŸÑŸäŸÉ ÿ™ÿ≠ÿ® ÿ™ÿ≥ÿ™ŸÅÿ≤ŸÜŸä Ÿàÿ™ŸÑÿπÿ® ŸÖÿπÿßŸäÿß 'ŸÑÿπÿ®ÿ© ŸÇÿ∑ ŸàŸÅÿßÿ±'ÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ∞ŸÉÿ±Ÿâ ÿßŸÑŸÑŸä ÿ™ÿÆŸÑŸäŸÉ ÿ™ÿ™ÿ®ÿ≥ŸÖ Ÿàÿ≠ÿØŸÉ Ÿàÿ£ŸÜÿ™ ÿ™ÿ™ŸÅŸÉÿ± ŸÅŸä ŸÇÿØÿßÿ¥ ŸÉŸÜÿß ŸÖÿ¥ÿ™ŸáŸäŸäŸÜ ÿ®ÿπÿ∂ŸÜÿßÿü", "ŸÉŸä ÿ™ÿÆŸÖŸÖ ŸÅŸäŸë ŸÅŸä ÿßŸÑŸÑŸäŸÑ Ÿàÿ£ŸÜÿ™ Ÿàÿ≠ÿØŸÉ ŸÅŸä ÿßŸÑŸÅÿ±ÿ¥ÿå ÿ¥ŸÜŸàÿ© Ÿäÿ¨Ÿä ŸÑÿ®ÿßŸÑŸÉÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿßŸÑŸÑŸä ÿ™ÿÆŸÑŸäŸÉ ÿ™ÿ≠ÿ≥ ÿ±Ÿàÿ≠ŸÉ ŸÖÿ±ÿ∫Ÿàÿ®ÿ© ŸàŸÖÿ¥ÿ™ŸáŸäÿ© ÿ®ÿ±ÿ¥ÿß ŸÖŸÜ ÿπŸÜÿØŸäÿü"
            ],
            3: [
                "ŸÉŸäŸÅÿßÿ¥ ÿ™ÿ™ÿÆŸäŸÑ ÿßŸÑŸàÿ¨Ÿäÿπÿ© ÿßŸÑÿ≠ŸÑŸàÿ© ŸÖÿ™ÿßÿπ ÿ£ŸàŸÑ ŸÖÿ±ÿ© ŸäÿØÿÆŸÑ ŸÅŸäŸáÿß ÿ≤ÿ®Ÿä ŸÅŸä ÿµÿ±ŸÖŸÉÿü", "ÿ¥ÿ≠ÿ≥Ÿäÿ™ ŸÉŸä ŸÉŸÜÿ™ ÿ™ÿ±ÿ∂ÿπŸÑŸä ŸÅŸä ÿ≤ÿ®Ÿä ŸÑŸäŸÜ ŸÇÿ±ÿ®ÿ™ ŸÜÿÆÿ±ÿ¨ ÿßŸÑÿ®ÿ≤ÿßÿπÿü ÿ≠ÿ®Ÿäÿ™ ÿßŸÑŸÖÿ∑ÿπŸÖ ŸÖÿ™ÿßÿπ ÿ≤ÿ®Ÿä ŸÅŸä ŸÅŸÖŸÉÿü", "ŸÉŸä ŸÜÿ≠ŸÉ ÿ≤ÿ®Ÿä ÿ®ÿßŸÑŸÇŸàŸä ÿπŸÑŸâ ÿ®ÿ∏ÿ±ŸÉÿå ÿ¥ŸÜŸàÿ© ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ≥ÿÆÿ© ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ® ÿ™ŸÇŸàŸÑŸáÿß ŸÅŸä Ÿàÿ∞ŸÜŸäÿü", "ŸÉŸäŸÅÿßÿ¥ ÿ™ÿ≠ÿ® ÿ™ŸÉŸàŸÜ ÿ£ŸàŸÑ ŸÜŸäŸÉÿ© ŸÑŸäŸÜÿßÿü ÿ™ÿ≠ÿ®ŸÜŸä ŸÜÿØÿÆŸÑŸà ÿ®ÿßŸÑÿ¥ŸàŸäÿ© Ÿàÿ•ŸÑÿß ŸÜÿ∫ÿ±ŸÇŸà ÿßŸÑŸÉŸÑ ÿ®ÿ∂ÿ±ÿ®ÿ© Ÿàÿ≠ÿØÿ©ÿü", "ŸÇÿØÿßÿ¥ ÿµÿ±ŸÖŸÉ Ÿäÿ®ÿØÿ£ ŸäÿßŸÉŸÑ ŸÅŸäŸÉ Ÿà'Ÿäÿπÿ∑ÿ¥' ŸÑÿ≤ÿ®Ÿä ŸÉŸä ÿ™ÿ±ÿßŸÜŸä ÿ¥ÿßÿØÿØ ÿ±Ÿàÿ≠Ÿä ŸàŸÖÿß ŸÜÿ≠ÿ®ÿ¥ ŸÜÿØÿÆŸÑŸàÿü", "ŸÉŸä ÿ™ÿ®ÿØÿß ÿπÿ±ŸäÿßŸÜÿ© ŸÅŸàŸÇŸä ŸàŸÜÿ∂ÿ±ÿ®ŸÉ ÿπŸÑŸâ ÿ≤ÿπŸÉÿ™ŸÉ ŸÑŸäŸÜ ÿ™ÿ≠ŸÖÿßÿ±ÿå ÿπŸÑÿßÿ¥ ÿ¥ŸáŸàÿ™ŸÉ ÿ™ÿ≤ŸäÿØ ÿ™ŸÇŸàŸâÿü", "ŸÉŸä ŸÜÿ®ÿØÿßŸà ÿπŸÑŸâ ÿ≠ÿ±ŸÅ ÿßŸÑŸÜŸäŸÉÿå ÿ¥ŸÜŸàÿ© ÿßŸÑŸÑŸä ŸäÿÆŸÑŸäŸÉ ÿ™ŸÜŸáÿßÿ± ÿπÿßÿ∑ŸÅŸäŸãÿß Ÿàÿ™ŸÅŸÇÿØ ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© Ÿàÿ£ŸÜÿ™ ÿ™ÿ™ŸÖŸÜŸâ ÿßŸÑÿØÿÆŸÑÿ©ÿü", "ÿ¥ŸÜŸàÿ© ÿ£ÿ≠ŸÑŸâ ÿ±ÿπÿ¥ÿ© ÿ¨ÿßÿ™ŸÉ ŸÉŸä ŸÜÿ≠ŸÉ ÿ≤ÿ®Ÿä ÿπŸÑŸâ ÿµÿ±ŸÖŸÉ ŸÖŸÜ ÿ®ÿ±ÿßÿü", "ÿπŸÑÿßÿ¥ ÿ™ŸàŸÑŸä ÿ™ÿ™ÿ±ÿ¨Ÿâ ŸÅŸäŸë ÿ®ÿßÿ¥ 'ŸÜŸÇÿ∑ÿπŸáŸàŸÑŸÉ' ŸÉŸä ŸÜÿ≠ŸÉ ÿ≤ÿ®Ÿä ÿ®ÿßŸÑŸÇŸàŸä ÿπŸÑŸâ ŸÜŸàŸÜÿ™ŸÉÿü", "ŸÇÿØÿßÿ¥ ÿ™ÿ≠ÿ≥ ÿ®ŸÑÿ∞ÿ© ŸÉŸä ŸÜÿ∂ÿ±ÿ®ŸÉ ÿπŸÑŸâ ÿ≤ÿπŸÉÿ™ŸÉ ŸÑŸäŸÜ ÿ™ŸàŸÑŸä ÿ≠ŸÖÿ±ÿßÿ°ÿü", "ŸÉŸä ŸÜŸÇŸÑŸÉ 'Ÿäÿß ŸÇÿ≠ÿ®ÿ™Ÿä' Ÿàÿ£ÿ≠ŸÜÿß ŸÅŸä Ÿàÿ≥ÿ∑ ÿßŸÑÿ¥ŸáŸàÿ©ÿå ŸáŸÑ ÿ™ŸÇŸÑŸÇŸÉ Ÿàÿ•ŸÑÿß ÿ™ÿ≤ŸäÿØ ÿ™ÿ¥ÿπŸÑŸÉÿü", "ŸÉŸä ÿ±ÿ∂ÿπÿ™ŸÑŸÉ ÿµÿ±ŸÖŸÉ ŸàŸÑÿ≠ÿ≥ÿ™ŸÑŸÉ ÿ®ÿ∏ÿ±ŸÉÿå ÿßÿ≠ŸÉŸäŸÑŸä ÿ¥ŸÜŸàÿ© ÿ≠ÿ≥Ÿäÿ™ ÿ®ÿßŸÑÿ™ŸÅÿµŸäŸÑÿü", "ÿ¥ŸÜŸàÿ© ÿ£ÿ≠ŸÑŸâ ÿ¥ÿπŸàÿ± ÿ¨ÿ±ÿ®ŸÜÿßŸá ŸÖÿπ ÿ®ÿπÿ∂ŸÜÿß ŸÑÿ™Ÿàÿ©ÿå ŸàŸäÿÆŸÑŸäŸÉ ŸÉŸÑ ŸÖÿß ÿ™ÿ™ŸÅŸÉÿ±Ÿá ÿ™ÿ™ÿ®ŸÑ Ÿàÿ™ÿ¥ÿ™ŸáŸäŸÜŸä ŸÖŸÜ ÿ¨ÿØŸäÿØÿü", "ŸÉŸä ÿ™ÿ∫ŸÖÿ∂ ÿπŸäŸÜŸäŸÉ Ÿàÿ™ÿ™ÿÆŸäŸÑ ÿ£ŸàŸÑ ŸÜŸáÿßÿ± ÿ®ÿßÿ¥ ŸÜŸÉŸàŸÜŸàÿß ŸÅŸäŸá ŸÑÿ®ÿπÿ∂ŸÜÿß ÿ®ÿßŸÑÿ±ÿ≥ŸÖŸäÿå ÿ¥ŸÜŸàÿ© ÿ£ŸàŸÑ ÿ≠ÿßÿ¨ÿ© ÿ™ÿ≠ÿ®ŸÜŸä ŸÜÿπŸÖŸÑŸáÿß ŸÑŸÄ ŸÜŸàŸÜÿ™ŸÉÿü", "ÿ¥ŸÜŸàÿ© ÿ£ŸÉÿ´ÿ± ÿ®ŸÑÿßÿµÿ© ŸÅŸä ÿ®ÿØŸÜŸÉ ÿ™ÿ≠ÿ≥Ÿáÿß 'ŸÖÿ¨ŸÜŸàŸÜÿ©' Ÿàÿ™ÿÆŸÑŸäŸÉ ÿ™ŸÅŸÇÿØŸä ÿßŸÑÿ≥Ÿäÿ∑ÿ±ÿ© ŸÉŸä ŸÜŸÖÿ≥Ÿáÿß ÿ®ŸÑÿ≥ÿßŸÜŸä Ÿàÿ•ŸÑÿß ÿ®ŸäÿØŸäÿü", "ŸÉŸä ŸÜÿ™ÿÆŸäŸÑ ÿ±Ÿàÿ≠Ÿä ŸÜÿ®ÿ≤ÿπ ÿßŸÑÿ®ÿ≤ÿßÿπ ŸÖÿ™ÿßÿπŸä ÿßŸÑŸÉŸÑ ÿπŸÑŸâ ŸÜŸàŸÜÿ™ŸÉ ÿßŸÑŸÖÿ®ŸÑŸàŸÑÿ© ŸàŸÜŸÖÿ≥ÿ≠Ÿà ÿ®ŸäÿØŸä, ÿ¥ŸÜŸàÿ© ÿßŸÑÿ•ÿ≠ÿ≥ÿßÿ≥ ÿßŸÑŸÑŸä Ÿäÿ±ŸÉÿ®ŸÉÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑŸÉŸÑÿßŸÖ ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ® ÿ™ÿ≥ŸÖÿπŸà ŸÉŸä ŸÜÿ®ÿØÿ£ ŸÜŸÜŸäŸÉ ŸÅŸäŸÉ ÿ®ÿßŸÑÿ≠ŸÇÿü", "ÿ£ÿπÿ∑ŸäŸÜŸä des fantasmes ŸÖÿ™ÿßÿπ ŸÜŸäŸÉ ŸÅŸä ŸÉŸÑ ÿ™ÿ±ŸÉŸäŸÜÿ© ŸÖŸÜ ÿØÿßÿ±ŸÜÿßÿå ŸàŸäŸÜ ÿ£ŸÉÿ´ÿ± ÿ®ŸÑÿßÿµÿ© ÿ™ÿ™ÿÆŸäŸÑŸÜŸä ŸÜŸÜŸäŸÉŸÉ ŸÅŸäŸáÿßÿü", "ÿ¥ŸÜŸàÿ© ÿ™ÿ™ÿµŸàÿ± ÿ±Ÿàÿ≠ŸÉ ÿ™ÿ≠ÿ® ÿÆŸäÿ±: ŸÜŸäŸÉÿ© ŸÅŸä ÿßŸÑÿµÿ®ÿßÿ≠ Ÿàÿ£ŸÜÿ™ ŸÉŸäŸÖÿß ŸàŸÑÿØÿ™ ÿ£ŸÖŸÉÿå Ÿàÿ•ŸÑÿß ŸÅŸä ÿßŸÑŸÑŸäŸÑ ŸàÿßŸÑÿ∂Ÿà ÿ∑ÿßŸÅŸäÿü", "ÿ¥ŸÜŸàÿ© ÿßŸÑŸÄ top 3 positions ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ® ÿ™ÿ¨ÿ±ÿ®ŸáŸÖ ŸÅŸä ÿ£ŸàŸÑ ŸÜŸäŸÉÿ© ŸÑŸäŸÜÿßÿü"
            ]
        };

        const suits = ['‚ô•', '‚ô¶', '‚ô£', '‚ô†'];

        // --- NAVIGATION ---
        function hideAll() { document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden')); }
        function goToHub() { hideAll(); document.getElementById('hub-screen').classList.remove('hidden'); isGameRunning = false; }
        function showAskMe() { hideAll(); document.getElementById('askme-cats').classList.remove('hidden'); }

        function loadQuestions(catId) {
            hideAll();
            const screen = document.getElementById('cards-grid-screen');
            screen.classList.remove('hidden');
            const grid = document.getElementById('main-grid');
            grid.innerHTML = '';
            
            const titles = ["", "BUTTERFLY MODE", "SPICY TALKS", "NO LIMITS"];
            document.getElementById('current-cat-title').innerText = titles[catId];

            questions[catId].forEach((q, index) => {
                const suit = suits[Math.floor(Math.random() * suits.length)];
                const color = (suit === '‚ô•' || suit === '‚ô¶') ? 'red' : 'black';
                const card = document.createElement('div');
                card.className = 'card-item';
                card.innerHTML = `
                    <div class="card-inner">
                        <div class="card-front" style="color: ${color}">${suit}</div>
                        <div class="card-back">${q}</div>
                    </div>
                `;
                card.onclick = () => card.classList.toggle('flipped');
                grid.appendChild(card);
            });
        }

        // --- JOIN ME LOGIC (REPRISE √Ä L'IDENTIQUE) ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let tileSize = 28, cols, rows, map = [], player = {x:1, y:1}, goal = {x:1, y:1}, isGameRunning = false;

        function showJoinMe() { hideAll(); document.getElementById('game-screen').classList.remove('hidden'); initJoinMe(); }

        function initJoinMe() {
            const w = window.innerWidth - 40;
            const h = window.innerHeight - 300;
            let tilesX = Math.floor(w / tileSize);
            let tilesY = Math.floor(h / tileSize);
            if (tilesX % 2 === 0) tilesX--;
            if (tilesY % 2 === 0) tilesY--;
            cols = tilesX; rows = tilesY;
            canvas.width = cols * tileSize; canvas.height = rows * tileSize;
            generateMaze();
            isGameRunning = true;
            loop();
        }

        function generateMaze() {
            map = Array(rows).fill().map(() => Array(cols).fill(1));
            const stack = [{x:1, y:1}];
            map[1][1] = 0;
            while(stack.length > 0) {
                const curr = stack[stack.length-1];
                const dirs = [{x:0,y:-2},{x:0,y:2},{x:-2,y:0},{x:2,y:0}].filter(d => {
                    const nx=curr.x+d.x, ny=curr.y+d.y;
                    return nx>0 && nx<cols-1 && ny>0 && ny<rows-1 && map[ny][nx]===1;
                });
                if(dirs.length > 0) {
                    const d = dirs[Math.floor(Math.random()*dirs.length)];
                    map[curr.y+d.y/2][curr.x+d.x/2] = 0;
                    map[curr.y+d.y][curr.x+d.x] = 0;
                    stack.push({x:curr.x+d.x, y:curr.y+d.y});
                } else stack.pop();
            }
            player = {x:1, y:1}; goal = {x:cols-2, y:rows-2}; map[goal.y][goal.x] = 0;
        }

        function drawPrincess(x, y) {
            const cx = x * tileSize, cy = y * tileSize, s = tileSize / 16;
            ctx.fillStyle = '#ffd700'; ctx.fillRect(cx+6*s, cy+s, 4*s, 2*s); // Crown
            ctx.fillStyle = '#f1c40f'; ctx.fillRect(cx+4*s, cy+3*s, 8*s, 3*s); // Hair
            ctx.fillStyle = '#f5cba7'; ctx.fillRect(cx+5*s, cy+5*s, 6*s, 5*s); // Face
            ctx.fillStyle = '#000'; ctx.fillRect(cx+6*s, cy+7*s, s, s); ctx.fillRect(cx+9*s, cy+7*s, s, s); // Eyes
            ctx.fillStyle = '#e94560'; ctx.fillRect(cx+5*s, cy+10*s, 6*s, 5*s); // Dress
        }

        function drawGoal(x, y) {
            const gx = x*tileSize+tileSize/2, gy = y*tileSize+tileSize/2, s=tileSize/3;
            ctx.fillStyle = '#e94560'; ctx.beginPath();
            ctx.arc(gx-s/2, gy-s/2, s/2, Math.PI, 0); ctx.arc(gx+s/2, gy-s/2, s/2, Math.PI, 0);
            ctx.lineTo(gx, gy+s); ctx.fill();
        }

        function draw() {
            ctx.fillStyle = '#16213e'; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = '#0f3460';
            for(let y=0; y<rows; y++) for(let x=0; x<cols; x++) if(map[y][x]===0) ctx.fillRect(x*tileSize, y*tileSize, tileSize, tileSize);
            drawGoal(goal.x, goal.y);
            drawPrincess(player.x, player.y);
        }

        function movePlayer(dx, dy, e) {
            if(e) e.preventDefault();
            if(!isGameRunning) return;
            if(map[player.y+dy] && map[player.y+dy][player.x+dx] === 0) {
                player.x += dx; player.y += dy;
                if(player.x === goal.x && player.y === goal.y) {
                    isGameRunning = false;
                    document.getElementById('win-modal').classList.remove('hidden');
                }
            }
        }

        function loop() { if(isGameRunning) { draw(); requestAnimationFrame(loop); } }

        window.addEventListener('keydown', e => {
            if(e.key==='ArrowUp') movePlayer(0,-1);
            if(e.key==='ArrowDown') movePlayer(0,1);
            if(e.key==='ArrowLeft') movePlayer(-1,0);
            if(e.key==='ArrowRight') movePlayer(1,0);
        });
    </script>
</body>
</html>
